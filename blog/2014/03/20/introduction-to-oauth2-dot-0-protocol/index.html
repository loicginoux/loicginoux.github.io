
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Introduction to Oauth2.0 authorisation framework - Loic Ginoux Blog</title>
  <meta name="author" content="LoÃ¯c Ginoux">

  
  
  <meta name="description" content="authentication, security Introduction to Oauth2.0 Authorisation Framework There are different protocols and frameworks for authorizing a third party &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://loicginoux.github.io/blog/2014/03/20/introduction-to-oauth2-dot-0-protocol">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/styles.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Loic Ginoux Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <script src="/javascripts/jquery.sidr.min.js"></script>
  <script src="/javascripts/ah-blue.js"></script>
  
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-40468900-3']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head> 

<body   >
  <div class="aux-container">
    <a id="nav-toggle" href="#sidr"></a>
    <a id="search-toggle"></a>
</div>

<header class="header-container clearfix">
        <a href="/"><img src="/images/ah-frame.svg" onerror="this.onerror=null; this.src='ah-frame.png'"></a>
</header>

  <div class="main-container">
    <div class="main wrapper clearfix">
    	
    	<aside>
			
			  	<div class="search-container">
					<form action="http://google.com/search" method="get">
						<fieldset role="search">
							<input type="hidden" name="q" value="site:http://loicginoux.github.io" />
							<input class="search-field" type="text" name="q" results="0" placeholder=""/>
							<input class="submit" type="submit" value=""/>
						</fieldset>
					</form>
				</div>
			
		  <div id="main-nav">
    <nav>
        <ul>
        
            <li>
  <p>Technical tutorials, notes on Ruby on Rails and Javascript with a zest of freelancing.</p>
  <p>I am also a freelance IT Engineer available for hire.</p>
</li><li>
  <ul>
  <li>Website - <a href="http://www.loicginoux.com" target="_blank">loicginoux.com</a>
    <li>Github - <a href="http://www.github.com/loicginoux" target="_blank">github.com/loicginoux</a></li>
    <li>Twitter - <a href="http://www.twitter.com/loicginoux" target="_blank">@loicginoux</a></li>
    <li>Email - <a href="mailto:lginoux@gmail.com" target="_blank">lginoux at gmail</a></li>
  </ul>
</li><li>
  <h3>Recent Posts</h3>
  <ul>
   
   <li>
     <a href="/blog/2014/06/26/elastic-search-and-ruby-on-rails-example-application/">Elastic Search and Ruby on Rails Example Application</a>
   </li>
   
   <li>
     <a href="/blog/2014/03/20/introduction-to-oauth2-dot-0-protocol/">Introduction to Oauth2.0 Authorisation Framework</a>
   </li>
   
   <li>
     <a href="/blog/2014/02/28/gemfile-bootstrap/">Gemfile Bootstrap</a>
   </li>
   
   <li>
     <a href="/blog/2014/02/27/sign-a-pdf-contract-on-mac-in-30-seconds/">Sign a Pdf Contract on Mac in 30 Seconds</a>
   </li>
   
   <li>
     <a href="/blog/2014/02/17/joining-the-greaaat-network/">Joining the Greaaat Network</a>
   </li>
   
 </ul>
</li><li>
  <h3 class="panel-title">Categories</h3>
  <ul>

    
    <li>
      
      <a class="list-group-item " href="/blog/categories/javascript/index.html">
          javascript (<span class="badge">2</span>)
        </a>
    </li>
    
    <li>
      
      <a class="list-group-item " href="/blog/categories/rails/index.html">
          rails (<span class="badge">3</span>)
        </a>
    </li>
    
    <li>
      
      <a class="list-group-item " href="/blog/categories/programming-processes/index.html">
          programming processes (<span class="badge">2</span>)
        </a>
    </li>
    
    <li>
      
      <a class="list-group-item " href="/blog/categories/testing/index.html">
          testing (<span class="badge">1</span>)
        </a>
    </li>
    
    <li>
      
      <a class="list-group-item " href="/blog/categories/performance/index.html">
          performance (<span class="badge">1</span>)
        </a>
    </li>
    
    <li>
      
      <a class="list-group-item " href="/blog/categories/freelancing/index.html">
          freelancing (<span class="badge">2</span>)
        </a>
    </li>
    
    <li>
      
      <a class="list-group-item " href="/blog/categories/authentication/index.html">
          authentication (<span class="badge">1</span>)
        </a>
    </li>
    
    <li>
      
      <a class="list-group-item " href="/blog/categories/security/index.html">
          security (<span class="badge">1</span>)
        </a>
    </li>
    
    <li>
      
      <a class="list-group-item " href="/blog/categories/elastic-search/index.html">
          elastic-search (<span class="badge">1</span>)
        </a>
    </li>
    
    <li>
      
      <a class="list-group-item " href="/blog/categories/search,/index.html">
          search, (<span class="badge">1</span>)
        </a>
    </li>
    
  </ul>
</li>
        
        </ul>
    </nav>
</div>
		</aside>
		
      <div>
<article>
	<header>
  <div class="article-tags">
      

<span class="categories">
  
    <a class='category' href='/blog/categories/authentication/'>authentication</a>, <a class='category' href='/blog/categories/security/'>security</a>
  
</span>


  </div>
  
    <h1>
      Introduction to Oauth2.0 Authorisation Framework
    </h1>
  
</header>
<section>
  
    <p>There are different protocols and frameworks for authorizing a third party application to access restricted content but the most recent and the one that most social websites use is the Oauth2.0 protocol.</p>

<!-- more -->


<p>This is a complete different protocol as Oauth v1 so be carefull when you are are reading about Oauth and know which version the article is talking about.
Authentication seems complicated when first approached and I just want to share here an easy summary to understand how this works.</p>

<h2>Use cases</h2>

<p>You will find 2 main use cases as a developer:</p>

<p>- A web application (an Oauth client) will add to its registration/login process a way to login via a more reliable service (a Oauth provider) like Facebook, Twitter, etc..</p>

<p>- An application (a provider) wants to open its API so that other third party applications (clients) can make requests to its API in a secure and authenicated way and without having to store the user&rsquo;s credentials of the provider application.</p>

<h2>Roles</h2>

<p>There are two main roles involved in this communication.</p>

<p>- <strong> the client </strong> : a complete different application that need access to another external API.</p>

<p>- <strong> the provider </strong>: the application that provide the API or the one that you use to authenticate (think about Facebook authentication for example). It also manages which applications is allowed to access the different resources. The provider is usually the same server but it can be separated into 3 different servers: <strong> the resource owner </strong> that contains protected content or resource. This owner will allow access to resources (photos, pages, API, etc&hellip;) hosted on the <strong> resource server </strong>, <strong> the authorisation server </strong> will issue the access to client applications with the approval of the resource owner.</p>

<h2>Protocol</h2>

<p><img src="/images/posts/oauth20.jpg" alt="Oauth2.0 protocol" /></p>

<p>(A)  The client requests authorisation from the resource owner. The authorisation request can be made directly to the resource owner (as shown), or preferably indirectly via the authorisation server as an intermediary. It is basically the process happening when an application redirects you to the Facebook site and ask you permission to do some actions with your Facebook account. The framework allows you to specify a <strong> scope </strong> which will restrict the client application acess. For example a basic facebook scope could be reading your name and getting your photo while a write scope could be the possibility to let the client publish posts on your facebook account.</p>

<p> (B)  The client receives an authorisation grant, There are 4 types of grants (<a href="http://tools.ietf.org/html/rfc6749#section-1.3">described here</a>). In this introduction, we see only the authorisation code. So the provider sends back to the app an authentication token representing the resource owner&rsquo;s authorisation.</p>

<p> &copy;  The client requests an access token by authenticating with the authorisation server and sending the authorisation code granted.</p>

<p> (D)  The authorisation server authenticates the client and validates the authorisation grant, and if valid, issues an access token.</p>

<p> (E)  The client requests the protected resource from the resource server and authenticates by presenting the access token. At this time you can access the provider API with the acess token only, there is no need to know the user&rsquo;s credentials.</p>

<p> (F)  The resource server validates the access token, and if valid, serves the request.</p>

<h2>The acess token</h2>

<p>This token is usually a hash string used to access restricted resources. It has a specific expiry period and access scope. It may be restricted to a specific user.</p>

<h2>The refresh token</h2>

<p>Depending on the implementation of the provider, You will have two choices when the acess token has expired. If no refresh token has been provided, you need to restart the authentication process from the point &copy;. In the other hand, the provider can also send at the point (D) not only the acess token but also the refresh token. In this last case, this token is used to obtain a new access token when the current access token becomes invalid or expires.</p>

<p><img src="/images/posts/oauth_refresh_20.png" alt="Oauth2.0 refreshing an acess token" /></p>

<h2>Oauth 2.0 is not for authentication</h2>

<p>I just want to clarify one point which is sometimes misunderstood. This is an <strong> AUTHORISATION </strong> framework. It is not an authentication framework. It means that the provider allows you, as a client, to use some of its resources, in a controlled way. You will not be allowed to authenticate to the provider app using the acess token.</p>

<h2>Your job as a developer</h2>

<p>As a developer, you will have 2 different jobs when dealing with this authorisation framework.</p>

<p>- implementing the client app. You will have to register your application into the provider app. For example for the Facebook provider it&rsquo;s on <a href="https://developers.facebook.com/apps">this page</a>. It will gives you an app id and secret key. These are kept into yout application and will allow you to grant authorisation from the provider. You will probably also have to provide a callback URL, which is a the url the provider will redirect you when granted authorisation. As a RoR developers, the gem Omniauth is the best way to go.</p>

<p>- implementing the provider. You will need to create the pages for managing the client applications and restrict your API to be used with acess token authenication. All this is quite easy to do in Rails with the well documented gem Doorkeeper.</p>

<p>I hope you see a bit more clearly into this authorisation process but you should refer to the spec for more details.</p>

<h3>sources</h3>

<p><a href="http://tools.ietf.org/html/rfc6749">Oauth2.0 specifications</a></p>

  

</section>
<footer>

  <div class="article-date">
      








  


<time datetime="2014-03-20T11:41:43+01:00" pubdate data-updated="true">Mar 20<span>th</span>, 2014</time>
  </div>
  
    <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://loicginoux.github.io/blog/2014/03/20/introduction-to-oauth2-dot-0-protocol/" data-via="loicginoux" data-counturl="http://loicginoux.github.io/blog/2014/03/20/introduction-to-oauth2-dot-0-protocol/" >Tweet</a>
  
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

  

</footer>

	
	  <section class="comments">
	    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
	  </section>
	
</article>
</div>

    </div>
  </div>
  <footer class="main-footer">
	<section class="interior-footer">
		<span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
	</section>
</footer>


  


<script type="text/javascript">
      var disqus_shortname = 'lginoux';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://loicginoux.github.io/blog/2014/03/20/introduction-to-oauth2-dot-0-protocol/';
        var disqus_url = 'http://loicginoux.github.io/blog/2014/03/20/introduction-to-oauth2-dot-0-protocol/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




</body>
</html>
